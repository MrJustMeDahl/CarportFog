@startuml

class User {
- int userID
- String email
- String password
- String name
- int phoneNumber
- String address
- String role
- List<Order> orders

+ User(int userID, String email, String password, String name,int phoneNumber, String address, String role)
}

class Order{
- int orderID
- int userID
- boolean orderStatus
- Carport carport
- double price
- double indicativePrice
- ItemList itemList

+ Order (int orderID, int userID, String orderStatus, Carport carport, double price, double indicativePrice)
}

class Carport{
- double price
- double indicativePrice
- Map<Material, Integer> materials

+ Carport(Map<Material, Integer materials, int width, int length, int minHeight)
+ Carport(Map<Material, Integer materials, double price, double indicativePrice, int width, int length, int minHeight)
- double calculatePrice()
- double calculateIndicativePrice()
}

abstract class Material{
# int materialID
# String Description
# String type
# String function
# double price
# int length

# Material(int materialID, String description, String type, String function, double price, int length)
+ abstract double getPrice()
+ abstract double calculateActualPrice()
}

class Rafter{
- double actualPrice
+ Rafter(int materialID, String description, String type, String function, double price, int length)
+ double getPrice()
+ double calculateActualPrice()
}

class Post{
- double actualPrice
+ Post(int materialID, String description, String type, String function, double price, int length)
+ double getPrice()
+ double calculateActualPrice()
}

class Purlin{
- double actualPrice
+ Purlin(int materialID, String description, String type, String function, double price, int length)
+ double getPrice()
+ double calculateActualPrice()
}

class ItemList{
- List<ItemListMaterial> materials
- final MaterialCalculator materialCalculator
+ ItemList(int length, int width, int minHeight, boolean hasShed, List<Post> allPosts, List<Purlin> allPurlins, List<Rafter> allRafters)
+ ItemList(int length, int width, int minHeight, boolean hasShed)
+ void generateItemListContent(List<Post> allPosts, List<Purlin> allPurlins, List<Rafter> allRafters) throws NoMaterialFoundException
+ Map<Material, Integer> getMaterialsForCarport()
+ Map<Material, Integer> getMaterialsForShed()
}

class MaterialCalculator{
- int length
- int width
- int minHeight
- boolean hasShed
- DecimalFormat df
+ MaterialCalculator(int length, int width, int minHeight, boolean hasShed)
+ Set<ItemListMaterial> calculatePosts(List<Post> allPosts)
+ Set<ItemListMaterial> calculatePurlins(List<Purlin> allPurlins)
+ ItemListMaterial calculateRafters(List<Rafter> allRafters)
}

class ItemListMaterial{
- Material material
- int amount
- String message
- String partFor
+ ItemListMaterial(Material material, int amount, String message, String partFor)
}

class UserMapper{
<<static>>
+ User login(String email, String password, ConnectionPool connectionPool) throws DatabaseException
+ User createUser(String name, String email, String password, ConnectionPool connectionPool) throws DatabaseException
+ Set<User> getUsersForOrders(List<Order> orders, ConnectionPool connectionPool) throws DatabaseException
}

class OrderMapper{
<<static>>
+ Order createOrder (Carport carport, int UserID, ConnectionPool connectionPool) throws DatabaseException
+ List<Order> getOrdersByUserID(Int userID, ConnectionPool connectionPool) throws DatabaseException
+ void updateOrderOrdered(int orderID, ConnectionPool connectionPool) throws DatabaseException
+ void updateOrderPayed (int orderID, ConnectionPool connectionPool) throws DatabaseException
+ ItemList getItemListContentForOrder(int orderID, ItemList itemList, ConnectionPool connectionPool) throws DatabaseException
+ List<Order> getNewOrders(ConnectionPool connectionPool) throws DatabaseException
+ boolean deleteOrder(int orderID, ConnectionPool connectionPool) throws DatabaseException
+ boolean updateMeasurementsForOrder(int orderID, Carport carport, ConnectionPool connectionPool) throws DatabaseException
+ boolean updateItemListForOrder(int orderID, ItemList itemList, ConnectionPool connectionPool) throws DatabaseException
}

class MaterialMapper{
<<static>>
+ List<Rafter> rafters (ConnectionPool connectionPool) throws DatabaseException
+ List<Post> posts (ConnectionPool connectionPool) throws DatabaseException
+ List<Purlin> purlins (ConnectionPool connectionPool) throws DatabaseException
+ List<String> getAllMaterialTypes(ConnectionPool connectionPool)
+ List<String> getAllMaterialBuildFunctions(ConnectionPool connectionPool)
+ updateMaterial (int materialId, double newPrice, String newDescription, (ConnectionPool connectionPool)) throws DatabaseException
+ int createNewMaterial(String description, int materialType, int materialFunction, double price, (ConnectionPool connectionPool)) throws DatabaseException
+ int addLength (int materialId, int length, (ConnectionPool connectionPool)) throws DatabaseException
}

class ConnectionPool{
- HikariDataSource ds
- String USER
- String PASSWORD
- STRING URL
+ ConnectionPool(String USER, String PASSWORD, String URL)
+ void close()
}

User *-- Order
Order *-- Carport
Order *-- ItemList
Carport *-- Material
ItemList *-- ItemListMaterial
ItemListMaterial *-- Material
Material <|-- Rafter
Material <|-- Post
Material <|-- Purlin












@enduml